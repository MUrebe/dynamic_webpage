<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard</title>
  <link rel="stylesheet" href="style.css" />
  <script defer src="script.js"></script>
</head>
<body class="theme-default">
  <div class="container">
    <h1>Welcome, <span id="welcomeName">User</span></h1>

    <div class="menu">
      <button onclick="toggleMenu('infoPanel')">Toggle User Info</button>
      <button onclick="changeTheme('default')">Default Theme</button>
      <button onclick="changeTheme('dark')">Dark Theme</button>
      <button onclick="changeTheme('blue')">Blue Theme</button>
      <button onclick="logout()">Logout</button>
    </div>

    <div id="infoPanel" style="display: block; margin-top: 20px;">
      <h2>Your Info</h2>
      <pre id="userInfo">Loading...</pre>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const users = JSON.parse(localStorage.getItem('users') || '{}');
      const lastUser = Object.keys(users).find(u => sessionStorage.getItem('loggedInUser') === u);

      if (!lastUser) {
        alert("Please log in first.");
        window.location.href = "index.html";
        return;
      }

      const user = users[lastUser];
      document.getElementById('welcomeName').textContent = user.firstName;
      document.getElementById('userInfo').textContent = JSON.stringify(user, null, 2);
    });

    function logout() {
      sessionStorage.removeItem('loggedInUser');
      alert("Logged out.");
      window.location.href = "index.html";
    }
  </script>
</body>
</html>
